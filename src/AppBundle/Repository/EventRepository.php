<?php

namespace AppBundle\Repository;

/**
 * EventRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class EventRepository extends \Doctrine\ORM\EntityRepository {

    public function findEventByTitle($motcle) {
        $query = $this->createQueryBuilder('u')
                ->select('u')
                ->where('u.titre like :titre')
                ->orderBy('u.titre', 'ASC')
                ->setParameter('titre', '%' . $motcle . '%')
                ->getQuery();

        return $query->getResult();
    }

    public function sortByMinPrice() {
        $query = $this->createQueryBuilder('u')
                ->select('u')
                ->orderBy('u.prix', 'ASC')
                ->getQuery();

        return $query->getResult();
    }

    public function sortByMaxPrice() {
        $query = $this->createQueryBuilder('u')
                ->select('u')
                ->orderBy('u.prix', 'DESC')
                ->getQuery();

        return $query->getResult();
    }

    public function sortByParticipants() {
        $query = $this->createQueryBuilder('u')
                ->select('u')
                ->orderBy('u.nbrParticipants', 'DESC')
                ->getQuery();

        return $query->getResult();
    }
    
    public function sortByNearest() {
        $query = $this->createQueryBuilder('u')
                ->select('u')
                ->orderBy('u.nbrParticipants', 'DESC')
                ->getQuery();

        return $query->getResult();
    }
}
